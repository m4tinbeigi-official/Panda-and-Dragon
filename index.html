<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="پاندای بزرگ و اژدهای کوچک - داستانی الهام‌بخش از دوستی و آرامش.">
    <title>پاندای بزرگ و اژدهای کوچک</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazir', sans-serif;
            background: linear-gradient(to bottom, #fefae0, #d8f3dc);
            color: #333;
            overflow-x: hidden;
        }
        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #283618;
        }
        p {
            font-size: 1.2rem;
        }
        .btn-primary {
            background-color: #606c38;
            border: none;
        }
        .btn-primary:hover {
            background-color: #283618;
        }
        .quote {
            font-style: italic;
            color: #555;
        }
        .container {
            max-width: 600px;
        }
        .panda-img {
            width: 100px;
            height: auto;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div id="content" class="container text-center mt-5">
        <!-- محتوای اولیه بارگذاری می‌شود -->
        <img src="assets/images/panda_dragon.png" alt="پاندای بزرگ و اژدهای کوچک" class="panda-img">
        <h1 class="mb-4">پاندای بزرگ و اژدهای کوچک</h1>
        <p class="mb-4">به سفری الهام‌بخش با پاندای بزرگ و اژدهای کوچک خوش آمدید. داستانی که در آن دوستی، آرامش و طبیعت معنای تازه‌ای پیدا می‌کنند.</p>
        <blockquote class="quote mb-4">"بعضی اوقات همه آنچه که نیاز داری، نفس عمیق کشیدن است."</blockquote>
        <p>زبان خود را انتخاب کنید:</p>
        <select id="language-selector" class="form-select w-50 mx-auto mb-4">
            <option value="fa">فارسی</option>
            <option value="en" disabled>English</option>
        </select>
        <button id="start-btn" class="btn btn-primary">شروع داستان</button>
    </div>

    <script>
        const pages = [];
        for (let i = 1; i <= 118; i++) {
            pages.push({
                text: `صفحه ${i}`,
                image: `assets/images/page (${i}).jpg`,
                seoDescription: `توضیحات سئو برای صفحه ${i}`,
                seoTitle: `عنوان سئو برای صفحه ${i}`,
            });
        }

        const startBtn = document.getElementById("start-btn");
        startBtn.addEventListener("click", () => {
            window.location.href = 'page-1.html'; // هدایت به اولین صفحه
        });

        // تغییر URL بدون بارگذاری مجدد صفحه
        window.onload = () => {
            const pageId = getPageIdFromURL();  // گرفتن شماره صفحه از URL
            if (pageId !== null) {
                currentPage = pageId - 1;  // تنظیم شماره صفحه بر اساس URL
                renderPage();
            } else {
                // در صورتی که URL شماره صفحه نداشته باشد، صفحه اول را نشان بده
                currentPage = 0;
                renderPage();
            }
        };

        function getPageIdFromURL() {
            const pageId = window.location.pathname.split('-').pop().replace('.html', '');
            return pageId && !isNaN(pageId) ? parseInt(pageId) : null;
        }

        function renderPage() {
            const { text = "متن موجود نیست", image = "", seoTitle = "", seoDescription = "" } = pages[currentPage] || {};

            // تنظیم سئو برای صفحه
            document.title = seoTitle;
            document.querySelector('meta[name="description"]')?.setAttribute("content", seoDescription);

            // رندر محتوای صفحه
            const contentContainer = document.getElementById("content");
            contentContainer.innerHTML = `
                <img src="assets/images/panda_dragon.png" alt="پاندای بزرگ و اژدهای کوچک" class="panda-img">
                <h1 class="mb-4">پاندای بزرگ و اژدهای کوچک</h1>
                <h2>${text}</h2>
                <img src="${image}" alt="Story Image" class="img-fluid mb-4">
                <p>متن صفحه ${currentPage + 1}</p>
                <button onclick="changePage(${currentPage + 1})" class="btn btn-primary">صفحه بعد</button>
            `;

            const pageUrl = `page-${currentPage + 1}.html`;
            window.history.pushState(null, seoTitle, pageUrl);
        }

        function changePage(pageNumber) {
            const pageUrl = `page-${pageNumber}.html`;
            window.history.pushState(null, `Page ${pageNumber}`, pageUrl);
            currentPage = pageNumber - 1;
            renderPage();
        }

        // افزودن event listener برای بازگشت به صفحات قبلی
        window.addEventListener("popstate", () => {
            const pageId = getPageIdFromURL();
            if (pageId !== null) {
                currentPage = pageId - 1;
                renderPage();
            }
        });
    </script>
</body>
</html>
